<!DOCTYPE html>
<html lang="en"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:th="http://www.thymeleaf.org">
<head>
 <meta charset="UTF-8">
 <title>Vacation Manager</title>
 <link rel='stylesheet' type='text/css'
       href='https://api.tomtom.com/maps-sdk-for-web/cdn/5.x/5.63.0/maps/maps.css'>
    <link rel='stylesheet' type='text/css' href='https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.21.3/maps/maps.css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 <style>
 body{
 background-color: #f5f5dc;
 }
 .map {
 margin-top:100px;
  height: 100%;
  width: 100%;
  position: fixed;
  display : none;
  overflow-x: hidden;
  top: 0;
  right : 0;
}
.savebutton{
  margin-right: 50px;
}
.transportation{
margin:auto;
  display:block;
}
 .textboxes{
  padding-top: 200px;
 font-size: 20px;
 text-align: center;
 }
   .header {
   background-color: #f5f5dc;
  font-size: 12px;
  text-align: center;
}
#search{
margin:auto;
  display:block;
}
#addroute{
margin:auto;
  display:block;
}
#startform{
padding-top: 300px;
margin: 0 auto;
width:150px;
}
#startlabel{
  font-size: 30px;
  position:absolute;
  text-align: center;
  width:7%;
}

#startmap{
margin: 0 auto;
width:200px;
height: 40px;
}
#startingcityname{
width:  200px;
height: 40px;
margin-top:20px;
margin-bottom:20px;
}
#citynamesform{
margin-left:40%;
margin-top : 15px;
width:150px;
position: fixed;
text-align:center;
}
#citynamesform label{
font-size: 20px;
}
#Name1{
  width: 145px;
  height: 20px;
}
#zoomoncity{
    width: 150px;
   height: 20px;
}
#addtotrip{
    width: 150px;
    height: 20px;
}
.center {
  margin-left:150px;
}
#form{
  margin-bottom: 100px;
  z-index: 1;
  top: 0;
  padding-left: 20px;
  display: none;
  flex-direction: column;
  position : absolute;
  text-align:center;
}
#hname{
 text-align: center;
 vertical-align: middle;
font-size:30px;
border: 1px solid;
margin-right:10px;
}
#himage{
vertical-align: middle;

}

    .icon {
        background-size: cover;
        height: 30px;
        width: 30px;
    }
    .route-marker {
        align-items: center;
        background-color: #4a90e2;
        border: solid 3px #2faaff;
        border-radius: 50%;
        display: flex;
        height: 32px;
        justify-content: center;
        transition: width .1s, height .1s;
        width: 32px;
    }
.addtotrip{
margin-left:100px;
}
#listelement{
border: solid 3px DodgerBlue;
 border-radius: 10px;
 margin: 15px 0;
 text-align:center;
 list-style-type:none;

}
.listdetails{
font-size:12px;
list-style-type:none;
 text-align:center;
 display:none;
}
#citylist{
  margin-top: 60px;
  display: none;
  margin-left: 285px;
  font-size:24px;
}
ul[title]::before {
    content: attr(title);
    display: block;
    font-weight: bold;
    padding: 4px;
    text-align:center;
    font-size:30px;
}
.sidepanelcity {
height: 107px;
width: 100%;
display:none;
position: fixed;
z-index: 1;
top: 0;
left: 0;
background-color: #f5f5dc;
overflow-x: hidden;
transition: 0.5s;
border-bottom: 1px solid;
border-right: 1px solid;
}
.btn {
 background-color: DodgerBlue; /* Blue background */
  z-index: 1;
  top: 0;
  left: 0;
  display:none;
  position:absolute;
  border: none; /* Remove borders */
  color: white; /* White text */
  padding: 12px 16px; /* Some padding */
  font-size: 16px; /* Set a font size */
  cursor: pointer; /* Mouse pointer on hover */
}
.savetopdf{
position:absolute;
margin-left:305px;
margin-top:300px;
width:150px;
  padding: 12px 16px; /* Some padding */
  font-size: 16px; /* Set a font size */
  cursor: pointer; /* Mouse pointer on hover */
  text-align:center;
}
.showdetails{
position:absolute;
margin-left:305px;
margin-top:250px;
width:150px;
  padding: 12px 16px; /* Some padding */
  font-size: 16px; /* Set a font size */
  cursor: pointer; /* Mouse pointer on hover */
  text-align:center;;
}
.sidepanel {
height: 1015px;
width: 500px;
display:none;
position: absolute;
z-index: 1;
margin-top:108px;
top: 0;
left: 0;
background-color: #f5f5dc;
overflow-x: hidden;
padding-top: 60px;
border-top: 1px solid;
transition: 0.5s;
border-right: 1px solid;
background-image: linear-gradient(#000, #000);
background-size: 2px 100%;
background-repeat: no-repeat;
background-position: center center;
}
 </style>
 <script src='https://api.tomtom.com/maps-sdk-for-web/cdn/5.x/5.63.0/maps/maps-web.min.js'></script>
<script>(function(){ window.SS = window.SS || {}; SS.Require = function (callback){ if (typeof callback === 'function') { if (window.SS && SS.EventTrack) { callback(); } else { var siteSpect = document.getElementById('siteSpectLibraries'); var head = document.getElementsByTagName('head')[0]; if (siteSpect === null && typeof head !== 'undefined') { siteSpect = document.createElement('script'); siteSpect.type = 'text/javascript'; siteSpect.src = '/__ssobj/core.js+ssdomvar.js+generic-adapter.js';siteSpect.async = true; siteSpect.id = 'siteSpectLibraries'; head.appendChild(siteSpect); } if (window.addEventListener){ siteSpect.addEventListener('load', callback, false); } else { siteSpect.attachEvent('onload', callback, false); } } } };})(); </script> </head>
<body>
<form id = "startform">
    <label id = "startlabel" for="startingcityname">City name:</label><br>
    <input type="text" id="startingcityname" name="startingcityname"><br>
    <button id = "startmap" type = "button" onclick="togglemap()">Go</button>
</form>
<div id="mySidepanelCity" class="sidepanelcity">
    <div class="center">
    <form hidden id = "citynamesform">
        <label for="Name1"> Destination City:</label>
        <input type="text" id="Name1" name="Name1" placeholder="">
        <button id = "addtotrip" name="addtotrip" type = "button" onclick="addtrip()">Add to trip</button>
        <button id = "zoomoncity" name="zoomoncity" type = "button" onclick="zoomcity()">Zoom on city</button>
    </form>
    </div>
</div>
<button class="btn" id = "menubutton" onclick="menubutton()"><i class="fa fa-bars"></i> Menu</button>

<div id="mySidepanel" class="sidepanel">
    <button class = "savetopdf" id = "savetopdf" name="savetopdf" type = "button" onclick="savetopdf()">Save to PDF</button>
    <button class = "showdetails" id = "showdetails" name="showdetails" type = "button" onclick="showdetails()">Show Details</button>

    <ul title = "Cities" id = "citylist">

    </ul>

    <form hidden class = "textboxes" id = "form">
<label for="Name"> City:</label>
<input type="text" id="Name" name="cityName" placeholder="">
<label for="start">Start date:</label>
<input type="date" id="start" name="startDate"
       value="2022-12-01">
<label for="start">Return date:</label>
<input type="date" id="return" name="endDate"
       value="2022-12-01">
<label for="people">Persons:</label>
<input type="number" id="people" name="nrofppl"
       min="1" max="100" value="1"/>
<label for="rooms">Rooms:</label>
<input type="number" id="rooms" name="nrofrooms"
       min="1" max="100"/>
    <label for="transportation">Mode of transport:</label>
    <select id="transportation" name="transportation">
        <option value="Car">Car</option>
        <option value="Bus">Bus</option>
        <option value="Plane">Plane</option>
        <option value="Bike">Bike</option>
    </select>
        <label for="objectivename">Objective name:</label><br>
        <input type="text" id="objectivename" name="objectivename"><br>
        <button type = "button" id = "addobjective" onclick="addobjective1()">Add objective</button>
    <form>
  <button type = "button" id = "savebutton" onclick="toggleTable()">Search hotel</button>
        <label for="hotelname">Hotel name:</label><br>
        <input type="text" id="hotelname" name="hotelname"><br>
        <button id = "search" type = "button" onclick="route()">Go</button>
 </form>

        <ul id="myList" style="list-style-type:none;"></ul>
</form>
</div>
<div id='map' class='map'></div>
<div class="one"></div>
<script src='https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.21.3/services/services-web.min.js'></script>
<script th:inline="javascript">
var homecity;
var destinationcity;
const locationsarray = [];
const cityarray = [];
 var map = tt.map({
   key: [[${apikey}]], // this will be replaced by Thymeleaf at runtime
   container: 'map',
   style: 'tomtom://vector/1/basic-main',
   center: [20, 57.2787],
   zoom: 3
 });
 const popupOffsets = {
 top: [0, 0],
 bottom: [0, -50],
 'bottom-right': [0, -70],
 'bottom-left': [0, -70],
 left: [25, -35],
 right: [-25, -35]
}
var coordinates = new Array();
var coordinates2 = new Array();
// placeholder for data that will be filled in by Thymeleaf
const coolLocations = /*[[${coolLocations}]]*/ null;
coolLocations.forEach(location => {
 const marker = new tt.Marker().setLngLat(location.lnglat).addTo(map);
 const popup = new tt.Popup({offset: popupOffsets}).setHTML(location.description);
 marker.setPopup(popup).togglePopup();
locationsarray.push(location.description, location.lnglat);
const hotelsList = /*[[${hotelList}]]*/ null;
 marker.getElement().addEventListener('click', function () {
 const city1 = location.description;
 document.getElementById('Name1').value = city1;
  });
});

 map.addControl(new tt.FullscreenControl());
 map.addControl(new tt.NavigationControl());
  function createMarkerElement(type) {
            var element = document.createElement('div');
            var innerElement = document.createElement('div');

            element.className = 'route-marker';
            innerElement.className = 'icon tt-icon -white -' + type;
            element.appendChild(innerElement);
            return element;
        }

        function addMarkers(feature) {
            var startPoint, endPoint;
            if (feature.geometry.type === 'MultiLineString') {
                startPoint = feature.geometry.coordinates[0][0]; //get first point from first line
                endPoint = feature.geometry.coordinates.slice(-1)[0].slice(-1)[0]; //get last point from last line
            } else {
                startPoint = feature.geometry.coordinates[0];
                endPoint = feature.geometry.coordinates.slice(-1)[0];
            }

            new tt.Marker({ element: createMarkerElement('start') }).setLngLat(startPoint).addTo(map);
            new tt.Marker({ element: createMarkerElement('finish') }).setLngLat(endPoint).addTo(map);
        }

 function findFirstBuildingLayerId() {
            var layers = map.getStyle().layers;
            for (var index in layers) {
                if (layers[index].type === 'fill-extrusion') {
                    return layers[index].id;
                }
            }

            throw new Error('Map style does not contain any layer with fill-extrusion type.');
        }
          i = 0;
 function createPopup(feature, lngLat) {
 function convertToPoint(t){return{point:{latitude:t.lat,longitude:t.lng}}}function convertToSpeedFormat(t,r){return t+(r||"km/h")}function formatAsImperialDistance(t){var r=Math.round(1.094*t);return r>=1760?Math.round(r/17.6)/100+" mi":r+" yd"}function formatAsMetricDistance(t){var r=Math.round(t);return r>=1e3?Math.round(r/100)/10+" km":r+" m"}function roundLatLng(t){return Math.round(1e6*t)/1e6}function formatCategoryName(t){var r=t.toLowerCase().replace(/_/g," ");return r.charAt(0).toUpperCase()+r.slice(1)}var Formatters={convertToPoint:convertToPoint,convertToSpeedFormat:convertToSpeedFormat,formatAsImperialDistance:formatAsImperialDistance,formatAsMetricDistance:formatAsMetricDistance,roundLatLng:roundLatLng,formatCategoryName:formatCategoryName};window.Formatters=window.Formatters||Formatters;
                popup = new tt.Popup({ className: 'tt-popup', offset: [0, 18] })
                    .setLngLat(lngLat)
                    .setHTML(
                        '<div class="tt-pop-up-container">' +
                            '<div class="pop-up-content -small">' +
                                '<div class="pop-up-result-address">' +
                                    'Distance: ' + Formatters.formatAsMetricDistance(feature.lengthInMeters) +
                                '</div>'
                    )
                    .setMaxWidth('none');
                popup.addTo(map);
            }
 function onPopupTrigger(event) {
    infoHint.hide();
    if (popup) {
        popup.remove();
    }
    var feature = JSON.parse(event.features[0].properties.summary);
    createPopup(feature, event.lngLat);
}
function InfoHint(t,e,i){this.type=t,this.position=e,this.duration=i,this.element=this._createElement()}InfoHint.prototype.addTo=function(t){return t.appendChild(this.element),this},InfoHint.prototype.isHidden=function(){return this.element.classList.contains("-hidden")},InfoHint.prototype.hide=function(){this.element.classList.add("-hidden")},InfoHint.prototype.show=function(){this.element.classList.remove("-hidden")},InfoHint.prototype.setErrorMessage=function(t){this.element.innerText=t&&(t.message||t.data.message)||"There was an error.",this._createMessage()},InfoHint.prototype.setMessage=function(t){this.element.innerText=t,this._createMessage()},InfoHint.prototype._createElement=function(){var t=document.createElement("div");return t.setAttribute("class",this._getClassList()),t},InfoHint.prototype._createMessage=function(){this.show(),this.duration&&(this.timeout&&window.clearTimeout(this.timeout),this.duration&&(this.timeout=window.setTimeout(this.hide.bind(this),this.duration)))},InfoHint.prototype._createElement=function(){var t=document.createElement("div");return t.setAttribute("class",this._getClassList()),t},InfoHint.prototype._getClassList=function(){return["tt-info-hint","-hidden","-"+this.position,"-"+this.type].join(" ")},window.infoHint=window.InfoHint||InfoHint;
var infoHint = new InfoHint('info', 'bottom-center').addTo(document.getElementById('map'));
 function addroute(){
            tt.services.calculateRoute({
                key: [[${apikey}]],
                traffic: false,
                locations: coordinates[0]+ ',' + coordinates[1] + ':' + coordinates2[0] + ',' + coordinates2[1]
            })
                .then(function(response) {
                    var geojson = response.toGeoJson();
                    map.addLayer({
                        'id': 'route' + i,
                        'type': 'line',
                        'source': {
                            'type': 'geojson',
                            'data': geojson
                        },
                        'paint': {
                            'line-color': '#4a90e2',
                            'line-width': 8
                        }
                    }, findFirstBuildingLayerId());
                     map.on('mouseover', 'route' + i, onPopupTrigger);
                    addMarkers(geojson.features[0]);
                    var features = response.toGeoJson().features;
                    var bounds = new tt.LngLatBounds();
                    var coordinatess = features[0].geometry.coordinates;
                        var lngLat = coordinatess[Math.floor(coordinatess.length / 2)];
                        var summary = features[0].properties.summary;

                        createPopup(summary, lngLat);
                        coordinates.forEach(function(point) {
                            bounds.extend(tt.LngLat.convert(point));
                        });
                    geojson.features[0].geometry.coordinates.forEach(function(point) {
                        bounds.extend(tt.LngLat.convert(point));
                    });
                    map.fitBounds(bounds, { duration: 0, padding: 50 });
                    infoHint.setMessage('Hover over the route to display a popup with route information');
                });
                i++;
}
function addmaplayer(){
m = (1 / ((2 * Math.PI / 360) * 6378.137)) / 1000;
            map.addLayer({
                'id': 'overlay' + i,
                'type': 'fill',
                'source': {
                    'type': 'geojson',
                    'data': {
                        'type': 'Feature',
                        'geometry': {
                            'type': 'Polygon',
                            'coordinates': [
                            [
                                [coordinates[0] + 10000*m,coordinates[1] + 10000*m / Math.cos(coordinates[0] * (Math.PI/180))],
                                [coordinates[0] - 10000*m,coordinates[1] + 10000*m / Math.cos(coordinates[0] * (Math.PI/180))],
                                [coordinates[0] - 10000*m,coordinates[1] - 10000*m / Math.cos(coordinates[0] * (Math.PI/180))],
                                [coordinates[0] + 10000*m,coordinates[1] - 10000*m / Math.cos(coordinates[0] * (Math.PI/180))],
                                ]
                            ]
                        }
                    }
                },
                'layout': {},
                'paint': {
                    'fill-color': '#db356c',
                    'fill-opacity': 0.5,
                    'fill-outline-color': 'black'
                }
            });
  }
var menucounter = 1;
function menubutton(){
    if(menucounter%2 == 1){
     document.getElementById("form").style.display="flex";
     document.getElementById("citylist").style.display="inline-block";
    document.getElementById("mySidepanel").style.display="block";
    document.getElementById("mySidepanel").style.backgroundImage="linear-gradient(#000, #000)";
    document.getElementById("mySidepanel").style.borderRight="1px solid";
    document.getElementById("mySidepanel").style.borderTop="1px solid";
    document.getElementById("mySidepanel").style.display="block";
    }
    if(menucounter%2 == 0){
          document.getElementById("form").style.display="none";
      document.getElementById("citylist").style.display="none";
         document.getElementById("mySidepanel").style.borderRight="none";
         document.getElementById("mySidepanel").style.backgroundImage="none";
    document.getElementById("mySidepanel").style.borderTop="none";
    document.getElementById("mySidepanel").style.display="none";
}
    menucounter++;

}
</script>
<script>
const objectivelist = [];
var objectivenumber = 0;
function addobjective1(){
objectivelist[objectivenumber] = document.getElementById("objectivename").value;
objectivenumber++;
}
const listdataarray = [];
var position = 0;
x = 300;
y=250;
function route(){
x = x +160;
y = y +160;
listdataarray[position] = document.getElementById("Name").value;
listdataarray[position+1] = document.getElementById("start").value + " to " + document.getElementById("return").value;
listdataarray[position+2] = document.getElementById("people").value;
listdataarray[position+3] = document.getElementById("rooms").value;
listdataarray[position+4] = document.getElementById("transportation").value;
listdataarray[position+5] = document.getElementById("hotelname").value;
var value = 5;
 if(cityarray[cityarray.length-1] == homecity) value = 10;
 if(value == 5) {
 document.getElementById('citylist').innerHTML += '<li id = "listelement">' +destinationcity+ '</li>';
 document.getElementById('citylist').innerHTML += '<li class = "listdetails">' +listdataarray[position+1] + '</li>';
 document.getElementById('citylist').innerHTML += '<li class = "listdetails">' + "Hotel name: " + listdataarray[position+5] + '</li>';
 document.getElementById('citylist').innerHTML += '<li class = "listdetails">' +"People: " + listdataarray[position+2] + " || " + "Rooms: " + listdataarray[position+3] + '</li>';
 document.getElementById('citylist').innerHTML += '<li class = "listdetails">' + "Mode of transport: " + listdataarray[position+4]+ '</li>';
 for(let i = 0; i < objectivelist.length; i++){
 document.getElementById('citylist').innerHTML += '<li class = "listdetails">' + "Objective " + i + " : " + objectivelist[i]+ '</li>';

}
 position = position + 6;
 }
 else alert("The city is already on the trip!");
var coordinatesindex = locationsarray.indexOf(homecity)+1;
var coordinates2index =locationsarray.indexOf(destinationcity)+1;
coordinates = locationsarray[coordinatesindex];
coordinates2 = locationsarray[coordinates2index];
addroute();
  document.getElementById("mySidepanel").style.display="none";
  document.getElementById("mySidepanelCity").style.borderBottom="1px solid";
  document.getElementById("savetopdf").style.marginTop= x + "px";
  document.getElementById("showdetails").style.marginTop= y + "px";

homecity = locationsarray[coordinates2index-1];
document.getElementById("Name").value = "";
document.getElementById("start").value = "";
document.getElementById("return").value = "";
document.getElementById("people").value = "1";
document.getElementById("rooms").value = "";
document.getElementById("transportation").value = "Car";
document.getElementById("hotelname").value = "";
document.getElementById("objectivename").value = "";
objectivelist.length = 0;
}
function addtrip(){
objectivenumber = 0;
zoomcity();
 cityarray.push(document.getElementById('Name1').value);
 document.getElementById("form").style.display="flex";
 document.getElementById("citylist").style.display="inline-block";
 document.getElementById("mySidepanel").style.display="block";
 destinationcity = document.getElementById('Name1').value;
  document.getElementById("Name").value = destinationcity;
  const locationsarray2 = [];
function saveapi(response){
const apiresponse = response;
var data = JSON.stringify(apiresponse);
var values = data.split(":");
var coord = "123";
var name = "123";
for(let i = 0; i < values.length; i++){
if(values[i] == "\"Point\",\"coordinates\"") coord = values[i+1].substring(1, values[i+1].lastIndexOf("]"));
if(values[i]== "{\"xid\"") name = values[i+2].substring(1, values[i+2].lastIndexOf(",")-1);
if(values[i] =="{\"type\"") locationsarray2.push(coord, name);
}
locationsarray2.shift();
locationsarray2.shift();
locationsarray2.shift();
locationsarray2.shift();
for(let i = 0; i < locationsarray2.length; i= i+2){
const splitter = locationsarray2[i].split(",");
const array = [];
array.push(splitter[0]);
array.push(splitter[1]);
 const marker = new tt.Marker().setLngLat(array).addTo(map);
 const popup = new tt.Popup({offset: popupOffsets}).setHTML(locationsarray2[i+1]);
 marker.setPopup(popup).togglePopup();
 marker.getElement().addEventListener('click', function () {
 const objective = locationsarray2[i+1];
 document.getElementById('objectivename').value = objective;
  });
}
}
const options = {
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': '1fb99e2302msh01a84d95d59109cp1cc453jsn32731c716e00',
		'X-RapidAPI-Host': 'opentripmap-places-v1.p.rapidapi.com'
	}
};
var destinationcity2 = document.getElementById('Name1').value;
var coordinates22index =locationsarray.indexOf(destinationcity2)+1;
coordinates22 = locationsarray[coordinates22index];
fetch('https://opentripmap-places-v1.p.rapidapi.com/en/places/radius?lat='+coordinates22[1]+'&lon='+coordinates22[0]+'&radius=10000&rate=3&kinds=museums%2Cmonuments%2Chistoric', options)
	.then(response => response.json())
	.then(data => saveapi(data))
	.catch(err => console.error(err));
}
 function toggleTable(){
 document.getElementById("myList").innerHTML = "";
  document.getElementById('citylist').style.display="none";
   document.getElementById("form").style.display="none";
   document.getElementById("mySidepanel").style.backgroundImage="none";
   document.getElementById("savetopdf").style.display="none";
   document.getElementById("showdetails").style.display="none";
const hotelsarray = [];
function savehotels(response){
const apiresponse = response;
var data = JSON.stringify(apiresponse);
var values = data.split("\"");
var url = "";
var hotel_name = "";
var latitude = "";
var longitude = "";
var gross_price= "";
var main_photo_url= "";
for(let i = 0; i < values.length; i++){
if (values[i] == "url") url = values[i+2];
if (values[i] =="hotel_name") hotel_name = values[i+2];
if (values[i] == "latitude") latitude = values[i+1].substring(1).replace(',',' ');
if (values[i] == "longitude") longitude = values[i+1].substring(1).replace(',',' ');
if (values[i] == "gross_amount_hotel_currency" && values[i+1]==":{" && values[i+2] == "value") gross_price = values[i+3].substring(1).replace('}',' ').replace(',',' ');
if (values[i] == "gross_amount_hotel_currency" && values[i+1] == ":{" && values[i+2] == "currency" && values[i+3] == ":" && values[i+4] == "EUR" && values[i+5] == "," && values[i+6] == "value") gross_price = values[i+7].substring(1).replace('}',' ').replace(',',' ');
if (values[i] == "max_photo_url") main_photo_url = values[i+2];
if (values[i] =="max_1440_photo_url") hotelsarray.push(url, hotel_name, latitude, longitude, gross_price, main_photo_url);
}
for(let i = 0; i < hotelsarray.length; i = i+6){
document.getElementById('myList').innerHTML += '<li id = "hname" onclick="gethotel(this)">' + hotelsarray[i+1] + '</li>';
document.getElementById('myList').innerHTML += '<li id = "hname" ><a href="' + hotelsarray[i] + '"/>' + "Link"  +'</a>' +'</li>';
document.getElementById('myList').innerHTML += '<li id = "hname">' + hotelsarray[i+4] + "â‚¬"+ '</li>';
document.getElementById('myList').innerHTML += '<li id = "himage"><img src=' + hotelsarray[i+5] + 'width="460" height="400"'+ '</li>';
};
}

const options = {
	method: 'GET',
	headers: {
		'X-RapidAPI-Key': '1fb99e2302msh01a84d95d59109cp1cc453jsn32731c716e00',
		'X-RapidAPI-Host': 'booking-com.p.rapidapi.com'
	}
};
var destinationcity2 = document.getElementById('Name1').value;
var coordinates22index =locationsarray.indexOf(destinationcity2)+1;
coordinates22 = locationsarray[coordinates22index];
var adults_number = document.getElementById('people').value;
var checkout_date = document.getElementById('return').value;
var checkin_date = document.getElementById('start').value;
var room_number = document.getElementById('rooms').value;
fetch('https://booking-com.p.rapidapi.com/v1/hotels/search-by-coordinates?longitude='+coordinates22[0]+'&locale=en-gb&adults_number=' + adults_number +'&filter_by_currency=EUR&checkout_date=' + checkout_date + '&units=metric&latitude=' + coordinates22[1] +'&order_by=popularity&room_number=' + room_number + '&checkin_date=' + checkin_date +'&include_adjacency=true', options)
	.then(response => response.json())
	.then(data => savehotels(data))
	.catch(err => console.error(err));
 }
function isMobileOrTablet(){var i,a=!1;return i=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(i)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(i.substr(0,4)))&&(a=!0),a}window.isMobileOrTablet=window.isMobileOrTablet||isMobileOrTablet;

function gethotel(e){
    var name = e.textContent;
 document.getElementById('hotelname').value = name;
  document.getElementById("form").style.display="flex";
 document.getElementById("citylist").style.display="inline-block";
document.getElementById("myList").style.display="none";
 document.getElementById("mySidepanel").style.backgroundImage="linear-gradient(#000, #000)";
 document.getElementById("savetopdf").style.display="block";
   document.getElementById("showdetails").style.display="block";

}
function togglemap(){
document.getElementById("startform").style.display="none";
document.getElementById("mySidepanel").style.display="none";
document.getElementById("mySidepanelCity").style.display="block";
document.getElementById("map").style.display="block";
document.getElementById("menubutton").style.display="block";
map.resize();
document.getElementById("citynamesform").style.display="block";
homecity = document.getElementById("startingcityname").value;
document.getElementById('citylist').innerHTML += '<li id = "listelement">' + homecity + '</li>';
}
function zoomcity(){
var destinationcity2 = document.getElementById('Name1').value;
var coordinates22index =locationsarray.indexOf(destinationcity2)+1;
coordinates22 = locationsarray[coordinates22index];
map.flyTo({center: coordinates22, zoom: 9});
}
function savetopdf(){
document.getElementById("mySidepanel").style.display="block";
document.getElementById("mySidepanel").style.borderTop="none";
document.getElementById("mySidepanel").style.borderRight="none";
document.getElementById("mySidepanel").style.backgroundImage="none";
document.getElementById("mySidepanelCity").style.display="none";
document.getElementById("map").style.display="none";
document.getElementById("menubutton").style.display="none";
document.getElementById("form").style.display="none";
document.getElementById("savetopdf").style.display="none";
document.getElementById("showdetails").style.display="none";
window.print();
document.getElementById("map").style.display="block";
map.resize();
document.getElementById("showdetails").style.display="inline-block";
document.getElementById("savetopdf").style.display="inline-block";
document.getElementById("mySidepanel").style.display="block";
document.getElementById("mySidepanel").style.borderRight="1px solid";
document.getElementById("mySidepanel").style.borderTop="1px solid";
document.getElementById("mySidepanel").style.backgroundImage="linear-gradient(#000, #000)";
document.getElementById("mySidepanelCity").style.display="block";
document.getElementById("menubutton").style.display="block";
document.getElementById("form").style.display="flex";
}
var detailscounter=1;
function showdetails(){
var listelements = document.getElementsByClassName("listdetails");
 if(detailscounter%2 == 1){
    for(var i=0, len=listelements.length; i<len; i++)
    {
        listelements[i].style["display"] = "block";
    }
    }
 if(detailscounter%2 ==0){
for(var i=0, len=listelements.length; i<len; i++)
    {
        listelements[i].style["display"] = "none";
    }
}
detailscounter++;
}
</script>
</body>
</html>